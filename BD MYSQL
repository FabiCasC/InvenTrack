CREATE DATABASE inventario_db;
USE inventario_db;

CREATE TABLE productos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(150) NOT NULL,
    tipo ENUM('perecible','no_perecible') NOT NULL,
    cantidad INT NOT NULL DEFAULT 0,
    stock_minimo INT NOT NULL DEFAULT 5,
    unidad VARCHAR(20),
    precio DECIMAL(10,2)
);

CREATE TABLE movimientos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_producto INT NOT NULL,
    tipo_movimiento ENUM('entrada','salida') NOT NULL,
    fecha DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    cantidad INT NOT NULL,
    detalle VARCHAR(255),
    FOREIGN KEY (id_producto) REFERENCES productos(id) ON DELETE CASCADE
);

CREATE TABLE reabastecimientos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_producto INT NOT NULL,
    fecha_reabastecimiento DATETIME,
    cantidad_solicitada INT,
    estado ENUM('pendiente','completado','cancelado') DEFAULT 'pendiente',
    FOREIGN KEY (id_producto) REFERENCES productos(id) ON DELETE CASCADE
);
